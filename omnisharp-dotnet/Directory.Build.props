<Project>

	<PropertyGroup Label="Package locking">
		<RestorePackagesWithLockFile>true</RestorePackagesWithLockFile>

		<!-- Set the compilation constant if strong-naming -->
		<DefineConstants Condition=" '$(SignAssembly)' == true ">$(DefineConstants);SignAssembly</DefineConstants>
	</PropertyGroup>

	<!-- ****************************************************-->
	<!-- SonarLint connected mode settings i.e. ruleset and additional files. -->
	<!-- ****************************************************-->
	<PropertyGroup>
		<CodeAnalysisRuleSet>$(MSBuildThisFileDirectory).sonarlint\sonarlint-omnisharp-dotnetcsharp.ruleset</CodeAnalysisRuleSet>
	</PropertyGroup>

	<ItemGroup Label="Common items">
		<AdditionalFiles Include="$(MSBuildThisFileDirectory).sonarlint\sonarlint-omnisharp-dotnet\CSharp\SonarLint.xml">
			<Link>Properties\SonarLint.xml</Link>
		</AdditionalFiles>
	</ItemGroup>

	<!-- ****************************************************-->
	<!-- OmniSharp assembly references                       -->
	<!-- ****************************************************-->
	<PropertyGroup>
		<!-- TODO: this version needs to be kept in sync with
      1) the version in the POM for the ITs
      2) the version in the POM of the SonarLint.IntelliJ repo -->
		<OmniSharpVersion>1.39.10</OmniSharpVersion>

		<OmniSharpLocalDownloadDir>$(MSBuildThisFileDirectory).omnisharp\$(OmniSharpVersion)\</OmniSharpLocalDownloadDir>
		<OmniSharpUnzippedDir>$(OmniSharpLocalDownloadDir)\unzipped</OmniSharpUnzippedDir>
	</PropertyGroup>

	<ItemGroup Label="OmniSharp assemblies">
		<Reference Include="$(OmniSharpUnzippedDir)\OmniSharp.Abstractions.dll" Private="$(CopyOmniSharpToOutput)" />
		<Reference Include="$(OmniSharpUnzippedDir)\OmniSharp.Shared.dll" Private="$(CopyOmniSharpToOutput)" />
		<Reference Include="$(OmniSharpUnzippedDir)\OmniSharp.Roslyn.dll" Private="$(CopyOmniSharpToOutput)" />
		<Reference Include="$(OmniSharpUnzippedDir)\OmniSharp.Roslyn.CSharp.dll" Private="$(CopyOmniSharpToOutput)" />

		<!-- The following DLLs are added to avoid assembly conflicts. 
		They cannot be solved with a BindingRedirect since we are a netstandard application.
		 -->
		<Reference Include="$(OmniSharpUnzippedDir)\System.Buffers.dll" Private="$(CopyOmniSharpToOutput)" />
		<Reference Include="$(OmniSharpUnzippedDir)\System.Numerics.Vectors.dll" Private="$(CopyOmniSharpToOutput)" />
		<Reference Include="$(OmniSharpUnzippedDir)\System.ValueTuple.dll" Private="$(CopyOmniSharpToOutput)" />
	</ItemGroup>

</Project>
